<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 15px;
      background: #fafafa;
    }

    .screen-header {
      text-align: center;
      color: #7b3f00;
      margin-bottom: 10px;
    }

    .print-header {
      display: none;
      text-align: center;
      margin-bottom: 15px;
    }

    .print-header h2 {
      margin: 0;
      font-size: 20px;
    }

    .print-header p {
      margin: 4px 0 0;
      font-size: 14px;
    }

    .navbar {
      background: #7b3f00;
      padding: 10px;
      margin-bottom: 15px;
    }

    .navbar a {
      color: white;
      text-decoration: none;
      margin-right: 15px;
      font-weight: bold;
    }

    .summary {
      margin-bottom: 15px;
      font-size: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
    }

    th, td {
      border: 1px solid #000;
      padding: 8px;
      text-align: center;
      font-size: 14px;
    }

    th {
      background: #f2f2f2;
    }

    th a {
      color: black;
      text-decoration: none;
    }

    th a:hover {
      text-decoration: underline;
    }

    .actions {
      margin-top: 15px;
      text-align: center;
    }

    .print-btn {
      background: #2e7d32;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    @media print {

      body {
        background: white;
      }

      .print-header {
        display: block;
      }

      .navbar,
      .screen-header,
      .summary,
      .actions,
      .pagination {
        display: none !important;
      }

      .hide-print {
        display: none !important;
      }

      th {
        background: #eaeaea !important;
        -webkit-print-color-adjust: exact;
      }
    }
  </style>
</head>

<body>

  <!-- ЁЯФЭ NAVBAR (SCREEN ONLY) -->
  <!-- ЁЯЦея╕П SCREEN HEADER -->
  <h2 class="screen-header">ЁЯУК роХро▓рпНро╡рпЖроЯрпНроЯрпБ роиро┐родро┐ роЕро▒ро┐роХрпНроХрпИ (тВ╣5000 роорпЗро▓рпН)</h2>

  <!-- ЁЯЦия╕П PRINT HEADER -->
  <div class="print-header">
    <h2>ЁЯУК роХро▓рпНро╡рпЖроЯрпНроЯрпБ роиро┐родро┐ роЕро▒ро┐роХрпНроХрпИ</h2>
    <p>тВ╣5000 роорпЗро▓рпН ро╡ро┤роЩрпНроХро┐роп роиро┐родро┐ ро╡ро┐ро╡ро░роорпН</p>
  </div>

  <!-- SCREEN ONLY -->
  <div class="summary">
    <strong>роорпКродрпНрод родрпКроХрпИ (тВ╣5000 роорпЗро▓рпН):</strong>
    тВ╣ <%= @total_amount %>
  </div>

  <!-- ЁЯУД TABLE -->
  <table>
    <thead>
      <tr>
        <th>ро╡.роОрогрпН</th>
        <th>рокрпЖропро░рпН</th>
        <th>роКро░рпН</th>

        <!-- ЁЯФБ AMOUNT SORT (SCREEN ONLY, PRINT SAFE) -->
        <th>
          <%= link_to "родрпКроХрпИ (тВ╣)",
            reports_kalvettu_path(
              sort: "amount",
              direction: params[:direction] == "asc" ? "desc" : "asc"
            ) %>
        </th>

        <!-- SCREEN ONLY -->
        <th class="hide-print">рокрогроорпН роЪрпЖро▓рпБродрпНродрпБроорпН роорпБро▒рпИ</th>
        <th class="hide-print">родрпЗродро┐</th>
      </tr>
    </thead>

    <tbody>
      <% if @funds.any? %>
        <% @funds.each_with_index do |fund, index| %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= fund.name %></td>
            <td><%= fund.area %></td>
            <td><strong>тВ╣ <%= fund.amount %></strong></td>

            <!-- SCREEN ONLY -->
            <td class="hide-print"><%= fund.payment_mode.capitalize %></td>
            <td class="hide-print"><%= fund.created_at.strftime("%d-%m-%Y") %></td>
          </tr>
        <% end %>
      <% else %>
        <tr>
          <td colspan="6">тВ╣5000 роорпЗро▓рпН роОроирпНрод рокродро┐ро╡рпБроорпН роЗро▓рпНро▓рпИ</td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <!-- SCREEN ONLY -->
  <div class="pagination">
    <%= paginate @funds %>
  </div>

  <div class="actions">
    <button class="print-btn" onclick="window.print()">ЁЯЦия╕П Print Kalvettu Report</button>
  </div>

</body>
</html>
